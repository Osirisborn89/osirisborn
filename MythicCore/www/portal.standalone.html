<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Black Pyramid — Portal</title>
  <style>
    /* BP PORTAL (inline, immutable) */
    :root{
      --bg:#0e0b1f; --bg2:#0b0a18; --panel:#17152b; --muted:#a7afc3; --text:#f3f5fb;
      --border:rgba(178,156,255,.22); --badge:rgba(178,156,255,.3);
      --accent:#6e3cff; --accent2:#9d7bff; --accentGlow:rgba(110,60,255,.35);
      --r-lg:18px; --r-md:12px; --gap:12px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:
        radial-gradient(1200px 800px at -10% -10%, rgba(110,60,255,.12), transparent 55%),
        radial-gradient(1100px 700px at 120% 0%, rgba(157,123,255,.08), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2) 60%, var(--bg));
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .wrap{max-width:1080px;margin:0 auto;padding:20px}
    nav{position:sticky;top:0;z-index:10;background:rgba(14,11,31,.85);backdrop-filter:saturate(180%) blur(8px);
        border-bottom:1px solid var(--border)}
    .bar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 16px}
    .brand{font-weight:700;letter-spacing:.3px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{padding:8px 12px;border:1px solid var(--border);border-radius:999px;text-decoration:none;color:inherit;
         background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01))}
    .tab.active{box-shadow:0 0 0 2px var(--accentGlow)}
    main{min-height:60vh}
    .view h2{margin:0 0 8px 0;font-size:clamp(1.25rem,2.2vw,1.5rem)}
    .hero{margin:8px 0;padding:24px;border:1px solid var(--border);border-radius:22px;
          background:linear-gradient(180deg, rgba(110,60,255,.12), rgba(110,60,255,.02))}
    .hero h1{margin:0 0 6px 0;font-size:clamp(1.75rem,3vw,2.25rem)}
    .hero p{margin:0 0 12px 0;opacity:.92}
    .quick-actions a{display:inline-block;margin:6px 8px 0 0;padding:9px 13px;border:1px solid var(--border);
                     border-radius:12px;text-decoration:none;background:rgba(255,255,255,.03)}
    .tile-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;margin-top:12px}
    .tile{display:grid;grid-auto-rows:min-content 1fr;gap:4px;padding:16px;border:1px solid var(--border);border-radius:16px;
          text-decoration:none;color:inherit;background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015))}
    .tile:hover{box-shadow:0 14px 36px rgba(110,60,255,.18);border-color:var(--accentGlow)}
    .tile h4{margin:0 0 2px 0;font-size:1.05rem}
    .tile p{margin:0;opacity:.9;font-size:.95rem}
    .badge{justify-self:start;margin-top:8px;padding:3px 10px;border:1px solid var(--badge);border-radius:999px;font-size:.82rem;opacity:.96}
    .toolbar{display:flex;gap:8px;align-items:center;margin:10px 0 14px}
    .btn{display:inline-block;padding:8px 12px;border:1px solid var(--border);border-radius:10px;text-decoration:none;background:rgba(255,255,255,.03)}
    .btn.ghost{opacity:.85}
    footer{opacity:.7;font-size:.8rem;padding:12px 16px 24px}
    @media (max-width:900px){ .tile-grid{grid-template-columns:repeat(2,minmax(0,1fr))} }
    @media (max-width:600px){ .tile-grid{grid-template-columns:1fr} }
  /* purple-tweak v1 (force strong purple + anchor color) */
:root{ --accent:#8b5cf6; --accent2:#a78bfa; }
a{ color:inherit; text-decoration:none }
a:hover{ filter:brightness(1.08) }
body{
  background:
    radial-gradient(1200px 800px at -10% -10%, rgba(139,92,246,.18), transparent 55%),
    radial-gradient(1100px 700px at 120% 0%, rgba(167,139,250,.12), transparent 60%),
    linear-gradient(180deg, #0f0a1f, #0b0818 60%, #0f0a1f);
}
.tile:hover{ box-shadow:0 14px 36px rgba(139,92,246,.22); border-color:rgba(139,92,246,.45) }
.tab.active{ box-shadow:0 0 0 2px rgba(139,92,246,.45) }
</style>
<!-- removed: placeholder include -->
<!-- removed: placeholder include -->
<link rel="stylesheet" href="langs.lessons.css?v=20250821-223115" />
<script src="js/langs.loader.js?v=20250821-223115" defer></script><style id="lang-hardmask-inline">
/* HARD MASK: hide EVERYTHING except nav/footer and #lang-root on language routes */
body.route-lang-hasdata *:not(nav):not(nav *):not(.footer):not(.footer *):not(#lang-root):not(#lang-root *) {
  display: none !important;
}
/* Theme + ensure #lang-root visible */
#lang-root { display:block; max-width:960px; margin:0 auto; padding:24px 20px 64px; }
body.route-lang-hasdata {
  background:
    radial-gradient(1200px 800px at -10% -10%, rgba(110,60,255,.12) 0%, rgba(110,60,255,0) 60%),
    radial-gradient(1000px 600px at 110% 10%, rgba(0,200,255,.10) 0%, rgba(0,200,255,0) 55%),
    linear-gradient(180deg, rgba(14,11,31,1) 0%, rgba(10,9,24,1) 100%);
  background-attachment: fixed, fixed, fixed;
  min-height: 100vh;
}
/* Debug badge so we KNOW the route class is active */
#lang-debug-badge{
  position:fixed; bottom:8px; right:8px; z-index:9999;
  padding:6px 8px; border-radius:8px;
  background:#2d1b69; color:#fff; border:1px solid rgba(255,255,255,.25);
  font:12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  opacity:.9
}
</style><script id="lang-route-boot">
(function(){
  function isLangRoute(){ var h=(location.hash||""); return /^#\/learn\/[A-Za-z0-9\-]+/.test(h); }
  function ensureRoot(){
    var r=document.getElementById("lang-root");
    if(!r){ r=document.createElement("div"); r.id="lang-root";
      var f=document.querySelector(".footer"); if(f&&f.parentNode) f.parentNode.insertBefore(r,f); else document.body.appendChild(r);
    }
    return r;
  }
  function badge(on){
    var b=document.getElementById("lang-debug-badge");
    if(on){
      if(!b){ b=document.createElement("div"); b.id="lang-debug-badge"; b.textContent="LANG ROUTE ACTIVE"; document.body.appendChild(b); }
    } else { if(b){ b.remove(); } }
  }
  function apply(){
    if(isLangRoute()){
      document.body.classList.add("route-lang-hasdata");
      badge(true);
      var r=ensureRoot();
      if(!r.innerHTML){
        r.innerHTML = '<div class="lang-meta"><a href="#/learn/coding">← Back to Languages</a></div>'
                    + '<h1>Loading…</h1>'
                    + '<div id="lang-content"><div class="empty">Loading lessons (or content coming soon)…</div></div>';
      }
    } else {
      document.body.classList.remove("route-lang-hasdata");
      badge(false);
    }
  }
  window.addEventListener("hashchange", apply);
  document.addEventListener("DOMContentLoaded", apply);
  window.addEventListener("portal:ready", apply);
  apply();
})();
</script></head>
<body>
  <nav><div class="bar">
    <div class="brand">Black Pyramid</div>
    <div class="tabs">
      <a class="tab" data-tab="home"  href="#/home">Home</a>
      <a class="tab" data-tab="learn" href="#/learn">Learning</a>
      <a class="tab" data-tab="lounge" href="#/lounge">Lounge</a>
    </div>
  </div></nav>

  <main id="app" class="wrap"></main>

  <!-- HOME -->
  <template id="tpl-home">
    <section class="view">
      <div class="hero">
        <h1>Black Pyramid</h1>
        <p>Mythic OS for Learning, Hacking, and Mastery.</p>
        <div class="quick-actions">
          <a href="#/learn">Enter Learning</a>
          <a href="#/lounge">Downtime Lounge</a>
          <a href="#/project">Project Station</a>
          <a href="#/cyber">Cybertools</a>
          <a href="#/help">Help / FAQ</a>
        </div>
      </div>

      <div class="tile-grid">
        <a class="tile" href="#/learn"><div><h4>Learning Hub</h4><p>Python, JS, C++, Cyber, CTFs...</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/lounge"><div><h4>Downtime Lounge</h4><p>Playlists, timers, games</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/project"><div><h4>Project Station</h4><p>Capstones & repos</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/cyber"><div><h4>Cybertools Vault</h4><p>Snippets & BYOT</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/help"><div><h4>Help / FAQ</h4><p>Guides & troubleshooting</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/ai"><div><h4>Anubis AI</h4><p>Co-pilot</p></div><div class="badge">Beta</div></a>
        <a class="tile" href="#/identity"><div><h4>Identity Hub</h4><p>Account / profile</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/xp"><div><h4>XP / Achievements</h4><p>Progress overview</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/career"><div><h4>Career Tools</h4><p>Portfolio & CV</p></div><div class="badge">Soon</div></a>
  <a class="tile" href="#/lore"><div><h4>Lore &amp; Expansions</h4><p>World, factions, unlocks</p></div><div class="badge">Lore</div></a>
  <a class="tile" href="#/sandbox"><div><h4>Sandboxes / Playgrounds</h4><p>Scratchpads & tools</p></div><div class="badge">Lab</div></a>

      </div>

      <div class="footer">Build: portal-standalone</div>
    </section>
  </template>

  <!-- LEARNING HUB (tracks) -->
  <template id="tpl-learn">
    <section class="view" id="view-learn">
      <h2>Learning Hub</h2>
      <p class="muted">Select a track to enter.</p>
      <div class="tile-grid">
        <a class="tile" href="#/learn/coding"><div><h4>Coding</h4><p>Python, JS, C++</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/learn/cyber"><div><h4>Cybersecurity</h4><p>Foundations, Web, Network, Bounty</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/learn/ctf"><div><h4>CTFs</h4><p>Wargames, Crypto, Rev, Pwn</p></div><div class="badge">Practice</div></a>
      </div>
    </section>
  </template>

  <!-- CODING (languages) -->
  <template id="tpl-learn-coding">
    <section class="view">
      <div class="toolbar"><a class="btn" href="#/learn">Learning Hub</a><a class="btn ghost" href="#/home">Home</a></div>
      <h2>Coding</h2>
      <p class="muted">Pick a language.</p>
      <div class="tile-grid">
        <a class="tile" href="#/learn/python"><div><h4>Python</h4><p>Beginner ÔåÆ Advanced</p></div><div class="badge">Start here</div></a>
        <a class="tile" href="#/learn/js"><div><h4>JavaScript</h4><p>Frontend + Node basics</p></div><div class="badge">Core</div></a>
        <a class="tile" href="#/learn/cpp"><div><h4>C++</h4><p>Language & tooling basics</p></div><div class="badge">Core</div></a>
      </div>
    </section>
  </template>

  <script>
  (function(){
    const app = document.getElementById('app');
    const map = { home:'tpl-home', learn:'tpl-learn', 'learn/coding':'tpl-learn-coding' };
    function routeKey(){
      const h = (location.hash||'#/home').replace(/^#\//,'');
      if (!h) return 'home';
      if (map[h]) return h;
      if (h.startsWith('learn/coding')) return 'learn/coding';
      if (h.startsWith('learn')) return 'learn';
      return 'home';
    }
    function setActive(tab){
      document.querySelectorAll('.tab').forEach(el=>{
        el.classList.toggle('active', el.getAttribute('data-tab')===tab);
      });
    }
    function tpl(id){
      const t = document.getElementById(id);
      return t ? t.innerHTML : '<section class="view"><div class="hero"><h2>Not found</h2></div></section>';
    }
    function render(){
      const key = routeKey();
      app.innerHTML = tpl(map[key] || map.home);
      setActive(key.split('/')[0]);
      document.title = 'Black Pyramid - ' + (key.split('/')[0]||'home').replace(/^\w/,c=>c.toUpperCase());
      console.log('render', {key});
    }
    addEventListener('hashchange', ()=>requestAnimationFrame(render));
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', ()=>requestAnimationFrame(render));
    } else { requestAnimationFrame(render); }
  })();
  </script>
<script>
/* OSB_LANG_ENHANCER v1  -  augment /learn/coding grid with 22 languages (no SPA changes) */
(function(){
  function onTick(){
    var h=(location.hash||'').toLowerCase();
    if(h!=='#/learn/coding') return;

    var app=document.getElementById('app')||document.querySelector('main#app')||document.body;
    if(!app) return;

    // Find the visible Coding view and its grid
    var view = app.querySelector('section.view');
    if(!view) return;
    var grid = view.querySelector('.tile-grid');
    if(!grid) return;

    // Avoid double-run
    if(grid.__osbUpgraded) return;
    grid.__osbUpgraded = true;

    var langs = [
      ['python','Python'],['javascript','JavaScript'],['typescript','TypeScript'],['java','Java'],
      ['csharp','C#'],['cpp','C++'],['c','C'],['go','Go'],['rust','Rust'],['php','PHP'],
      ['ruby','Ruby'],['kotlin','Kotlin'],['swift','Swift'],['dart','Dart'],['scala','Scala'],
      ['haskell','Haskell'],['lua','Lua'],['r','R'],['matlab','MATLAB'],['sql','SQL'],
      ['bash','Bash/Shell'],['htmlcss','HTML/CSS']
    ];

    var frag=document.createDocumentFragment();
    langs.forEach(function(pair){
      var a=document.createElement('a'); a.className='tile'; a.href='#/learn/'+pair[0];
      var t=document.createElement('div'); t.className='tile-title'; t.textContent=pair[1];
      a.appendChild(t); frag.appendChild(a);
    });

    grid.innerHTML = '';
    grid.appendChild(frag);
    window.scrollTo(0,0);
  }

  function raf(){ requestAnimationFrame(onTick); }
  window.addEventListener('hashchange', raf);
  if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', raf); } else { raf(); }
})();
</script>
<script>
/* OSB_TRACK_ENHANCER v1  -  dedicated pages for /learn/<trackId> (excludes "coding") */
(function(){
  if (window.__osb_track_enhancer) return; window.__osb_track_enhancer = true;

  var HOST = "osb-track-layer", CSS = "osb-track-layer-css";

  function j(u){
    var url=(u.startsWith("./")?u:"./"+u)+((u.indexOf("?")>=0?"&":"?")+"bust="+Date.now());
    return fetch(url,{cache:"no-store"}).then(function(r){ if(!r.ok) throw new Error("HTTP "+r.status+" "+url); return r.json(); });
  }

  function ensureLayer(){
    var host=document.getElementById(HOST);
    if(!host){
      host=document.createElement("div");
      host.id=HOST;
      host.setAttribute("style","position:fixed;inset:0;z-index:2147483647;overflow:auto;background:#0b0b0f;color:#eaeaea;font:14px system-ui,Segoe UI,Roboto,Arial");
      document.body.appendChild(host);
    }
    var css=document.getElementById(CSS);
    if(!css){
      css=document.createElement("style"); css.id=CSS;
      css.textContent=[
        "#"+HOST+" .wrap{max-width:1200px;margin:0 auto;padding:24px;}",
        "#"+HOST+" h1{margin:0 0 12px 0;font-size:28px;font-weight:700;}",
        "#"+HOST+" .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;}",
        "#"+HOST+" .grid.sm{grid-template-columns:repeat(auto-fit,minmax(180px,1fr));}",
        "#"+HOST+" .card{display:block;padding:14px;border:1px solid #25253a;border-radius:12px;background:#13131a;text-decoration:none;color:inherit;}",
        "#"+HOST+" .card:hover{box-shadow:0 6px 18px rgba(0,0,0,.35);transform:translateY(-1px);} ",
        "#"+HOST+" .title{font-weight:600;}",
        "#"+HOST+" .sub{opacity:.75;font-size:13px;margin-top:4px;}",
        "@media (prefers-color-scheme: light){ #"+HOST+"{background:#fff;color:#111} #"+HOST+" .card{background:#f9fafb;border-color:#e5e7eb} }"
      ].join("\\n");
      document.head.appendChild(css);
    }
    return host;
  }

  function removeLayer(){
    var host=document.getElementById(HOST); if(host&&host.parentElement) host.parentElement.removeChild(host);
    var css=document.getElementById(CSS);   if(css&&css.parentElement)   css.parentElement.removeChild(css);
  }

  function card(href,title,sub){
    var a=document.createElement("a"); a.className="card"; a.href=href;
    var t=document.createElement("div"); t.className="title"; t.textContent=title; a.appendChild(t);
    if(sub){ var s=document.createElement("div"); s.className="sub"; s.textContent=sub; a.appendChild(s); }
    return a;
  }

  async function render(trackId, modId, lessonId){
    var host=ensureLayer();
    var wrap=document.createElement("div"); wrap.className="wrap";
    host.innerHTML=""; host.appendChild(wrap);

    // Header
    var backGrid=document.createElement("div"); backGrid.className="grid sm";
    backGrid.appendChild(card("#/learn/coding"," Back to Languages",""));
    wrap.appendChild(backGrid);
    var h=document.createElement("h1"); h.textContent="Loading..."; wrap.appendChild(h);

    // Find metadata and load data file
    var all=await j("api/lessons/tracks.json");
    var meta=all.find(function(t){ return (t.trackId||"").toLowerCase()===trackId.toLowerCase(); });
    var file = meta ? meta.file : ("coding_"+trackId+".json");
    var data = await j("api/lessons/"+file).catch(function(e){ return { title: (meta?meta.title:trackId), modules: [], __err: e }; });

    h.textContent = data.title || (meta?meta.title:trackId);

    // If lesson view requested
    if (modId && lessonId){
      var module=(data.modules||[]).find(function(m){return m.id===modId;});
      var lesson=module?(module.lessons||[]).find(function(L){return L.id===lessonId;}):null;

      var nav=document.createElement("div"); nav.className="grid sm";
      nav.appendChild(card("#/learn/"+trackId," Back to Modules",""));
      wrap.appendChild(nav);

      var body=document.createElement("div"); body.style.marginTop="12px";
      body.innerHTML = (lesson && lesson.body) ? lesson.body : "<p>Lesson content coming soon.</p>";
      wrap.appendChild(body);
      window.scrollTo(0,0);
      return;
    }

    // Otherwise, modules overview
    var grid=document.createElement("div"); grid.className="grid"; wrap.appendChild(grid);

    (data.modules||[]).forEach(function(m){
      var c=document.createElement("div"); c.className="card";
      var tt=document.createElement("div"); tt.className="title"; tt.textContent=m.title||m.id; c.appendChild(tt);
      var list=document.createElement("div"); list.style.marginTop="6px";
      (m.lessons||[]).forEach(function(L){
        var a=card("#/learn/"+trackId+"/"+m.id+"/"+L.id, (L.title||L.id), (L.est? (L.est+" min"):""));
        list.appendChild(a);
      });
      if(!m.lessons || !m.lessons.length){ var none=document.createElement("div"); none.className="sub"; none.textContent="Lessons coming soon."; list.appendChild(none); }
      c.appendChild(list);
      grid.appendChild(c);
    });

    if(!data.modules || !data.modules.length){
      var ph=document.createElement("div"); ph.className="sub"; ph.textContent="Curriculum will be added here.";
      wrap.appendChild(ph);
    }

    window.scrollTo(0,0);
  }

  function route(){
    var h=(location.hash||"").toLowerCase();
    // match: #/learn/<track>  or  #/learn/<track>/<module>/<lesson>  (exclude 'coding')
    var m = h.match(/^#\/learn\/(?!coding$)([a-z0-9_]+)(?:\/([a-z0-9_-]+)(?:\/([a-z0-9_-]+))?)?$/);
    if(m){ render(m[1], m[2], m[3]); }
    else { removeLayer(); }
  }

  window.addEventListener("hashchange", route);
  if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", route); else route();
})();
</script>
<script>
/* OSB_LANG_ENHANCER v2  -  /learn/coding grid (ASCII-only) + title */
(function(){
  if (window.__osb_lang_v2) return; window.__osb_lang_v2 = true;

  function setTitleForLanguages(){
    try { document.title = "Black Pyramid - Languages"; } catch(e){}
  }

  function onTick(){
    var h=(location.hash||"").toLowerCase();
    if(h!=="#/learn/coding") return;

    setTitleForLanguages();

    var app=document.getElementById("app")||document.querySelector("main#app")||document.body;
    if(!app) return;

    // Find the visible Coding view and its grid
    var view = app.querySelector("section.view");
    if(!view) return;
    var grid = view.querySelector(".tile-grid");
    if(!grid) return;

    // Only run once per grid render
    if(grid.__osbUpgraded) return;
    grid.__osbUpgraded = true;

    var langs = [
      ["python","Python"],["javascript","JavaScript"],["typescript","TypeScript"],["java","Java"],
      ["csharp","C#"],["cpp","C++"],["c","C"],["go","Go"],["rust","Rust"],["php","PHP"],
      ["ruby","Ruby"],["kotlin","Kotlin"],["swift","Swift"],["dart","Dart"],["scala","Scala"],
      ["haskell","Haskell"],["lua","Lua"],["r","R"],["matlab","MATLAB"],["sql","SQL"],
      ["bash","Bash/Shell"],["htmlcss","HTML/CSS"]
    ];

    var frag=document.createDocumentFragment();

    // Back tile (ASCII text)
    var back=document.createElement("a"); back.className="tile"; back.href="#/learn";
    var bt=document.createElement("div"); bt.className="tile-title"; bt.textContent="Back to Learning";
    back.appendChild(bt); frag.appendChild(back);

    langs.forEach(function(pair){
      var a=document.createElement("a"); a.className="tile"; a.href="#/learn/"+pair[0];
      var t=document.createElement("div"); t.className="tile-title"; t.textContent=pair[1];
      a.appendChild(t); frag.appendChild(a);
    });

    grid.innerHTML = "";
    grid.appendChild(frag);
    window.scrollTo(0,0);
  }

  function raf(){ requestAnimationFrame(onTick); }
  window.addEventListener("hashchange", raf);
  if (document.readyState === "loading") { document.addEventListener("DOMContentLoaded", raf); } else { raf(); }
})();
</script>
<script>
/* OSB_TRACK_ENHANCER v2  -  /learn/<trackId> pages (ASCII-only) + title */
(function(){
  if (window.__osb_track_v2) return; window.__osb_track_v2 = true;

  var HOST="osb-track-layer", CSS="osb-track-layer-css";

  function j(u){
    var url=(u.startsWith("./")?u:"./"+u)+((u.indexOf("?")>=0?"&":"?")+"bust="+Date.now());
    return fetch(url,{cache:"no-store"}).then(function(r){ if(!r.ok) throw new Error("HTTP "+r.status+" "+url); return r.json(); });
  }
  function ensureLayer(){
    var host=document.getElementById(HOST);
    if(!host){
      host=document.createElement("div");
      host.id=HOST;
      host.setAttribute("style","position:fixed;inset:0;z-index:2147483647;overflow:auto;background:#0b0b0f;color:#eaeaea;font:14px system-ui,Segoe UI,Roboto,Arial");
      document.body.appendChild(host);
    }
    var css=document.getElementById(CSS);
    if(!css){
      css=document.createElement("style"); css.id=CSS;
      css.textContent=[
        "#"+HOST+" .wrap{max-width:1200px;margin:0 auto;padding:24px;}",
        "#"+HOST+" h1{margin:0 0 12px 0;font-size:28px;font-weight:700;}",
        "#"+HOST+" .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;}",
        "#"+HOST+" .grid.sm{grid-template-columns:repeat(auto-fit,minmax(180px,1fr));}",
        "#"+HOST+" .card{display:block;padding:14px;border:1px solid #25253a;border-radius:12px;background:#13131a;text-decoration:none;color:inherit;}",
        "#"+HOST+" .card:hover{box-shadow:0 6px 18px rgba(0,0,0,.35);transform:translateY(-1px);} ",
        "#"+HOST+" .title{font-weight:600;}",
        "#"+HOST+" .sub{opacity:.75;font-size:13px;margin-top:4px;}",
        "@media (prefers-color-scheme: light){ #"+HOST+"{background:#fff;color:#111} #"+HOST+" .card{background:#f9fafb;border-color:#e5e7eb} }"
      ].join("\\n");
      document.head.appendChild(css);
    }
    return host;
  }
  function removeLayer(){
    var host=document.getElementById(HOST); if(host&&host.parentElement) host.parentElement.removeChild(host);
    var css=document.getElementById(CSS);   if(css&&css.parentElement)   css.parentElement.removeChild(css);
  }
  function card(href,title,sub){
    var a=document.createElement("a"); a.className="card"; a.href=href;
    var t=document.createElement("div"); t.className="title"; t.textContent=title; a.appendChild(t);
    if(sub){ var s=document.createElement("div"); s.className="sub"; s.textContent=sub; a.appendChild(s); }
    return a;
  }
  function setTrackTitle(txt){
    try { document.title = "Black Pyramid - " + txt; } catch(e){}
  }

  async function render(trackId, modId, lessonId){
    var host=ensureLayer();
    var wrap=document.createElement("div"); wrap.className="wrap";
    host.innerHTML=""; host.appendChild(wrap);

    var backGrid=document.createElement("div"); backGrid.className="grid sm";
    backGrid.appendChild(card("#/learn/coding","Back to Languages",""));
    wrap.appendChild(backGrid);
    var h=document.createElement("h1"); h.textContent="Loading..."; wrap.appendChild(h);

    var all=await j("api/lessons/tracks.json");
    var meta=all.find(function(t){ return (t.trackId||"").toLowerCase()===trackId.toLowerCase(); });
    var file = meta ? meta.file : ("coding_"+trackId+".json");
    var data = await j("api/lessons/"+file).catch(function(e){ return { title: (meta?meta.title:trackId), modules: [], __err: e }; });

    h.textContent = data.title || (meta?meta.title:trackId);
    setTrackTitle(h.textContent);

    if (modId && lessonId){
      var module=(data.modules||[]).find(function(m){return m.id===modId;});
      var lesson=module?(module.lessons||[]).find(function(L){return L.id===lessonId;}):null;

      var nav=document.createElement("div"); nav.className="grid sm";
      nav.appendChild(card("#/learn/"+trackId,"Back to Modules",""));
      wrap.appendChild(nav);

      var body=document.createElement("div"); body.style.marginTop="12px";
      body.innerHTML = (lesson && lesson.body) ? lesson.body : "<p>Lesson content coming soon.</p>";
      wrap.appendChild(body);
      window.scrollTo(0,0);
      return;
    }

    var grid=document.createElement("div"); grid.className="grid"; wrap.appendChild(grid);

    (data.modules||[]).forEach(function(m){
      var c=document.createElement("div"); c.className="card";
      var tt=document.createElement("div"); tt.className="title"; tt.textContent=m.title||m.id; c.appendChild(tt);
      var list=document.createElement("div"); list.style.marginTop="6px";
      (m.lessons||[]).forEach(function(L){
        var a=card("#/learn/"+trackId+"/"+m.id+"/"+L.id, (L.title||L.id), (L.est? (L.est+" min"):""));
        list.appendChild(a);
      });
      if(!m.lessons || !m.lessons.length){ var none=document.createElement("div"); none.className="sub"; none.textContent="Lessons coming soon."; list.appendChild(none); }
      c.appendChild(list);
      grid.appendChild(c);
    });

    if(!data.modules || !data.modules.length){
      var ph=document.createElement("div"); ph.className="sub"; ph.textContent="Curriculum will be added here.";
      wrap.appendChild(ph);
    }

    window.scrollTo(0,0);
  }

  function route(){
    var h=(location.hash||"").toLowerCase();
    var m = h.match(/^#\/learn\/(?!coding$)([a-z0-9_]+)(?:\/([a-z0-9_-]+)(?:\/([a-z0-9_-]+))?)?$/);
    if(m){ render(m[1], m[2], m[3]); } else { removeLayer(); }
  }

  window.addEventListener("hashchange", route);
  if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", route); else route();
})();
</script>
feature/lms-langs-track-pages-20250821150646
<script>
/* OSB_TITLE_FIX v1 — normalize tab titles to ASCII at runtime */
(function(){
  function fix(){ try{ document.title = document.title.replace(/\u2014|â€”|ÔÇö/g, " - "); }catch(e){} }
  window.addEventListener("hashchange", fix);
  if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", fix); else fix();
})();
</script>

  main
  
  <script src="js/lms.chrome.js" defer></script>
</body>
</html>








